{% extends 'base.html' %}

{% block title %}{{ proyecto.titulo }} - Detalle del Proyecto{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<div class="row mb-4">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" style="background: rgba(0, 184, 148, 0.05); padding: 15px; border-radius: 15px;">
                <li class="breadcrumb-item">
                    <a href="{% url 'aprendices:inicio' %}" class="back-link" style="text-decoration: none;">
                        <i class="fas fa-home me-1"></i>Inicio
                    </a>
                </li>
                <li class="breadcrumb-item">
                    <a href="{% url 'proyectos:lista_proyectos' %}" class="back-link" style="text-decoration: none;">
                        <i class="fas fa-project-diagram me-1"></i>Lista de Proyectos
                    </a>
                </li>
                <li class="breadcrumb-item active text-muted" aria-current="page">
                    <i class="fas fa-eye me-1"></i>{{ proyecto.titulo|truncatechars:50 }}
                </li>
            </ol>
        </nav>
    </div>
</div>

<!-- Header del Proyecto -->
<div class="row mb-5">
    <div class="col-12">
        <div class="jumbotron text-center py-5">
            <div class="row align-items-center">
                <div class="col-md-3 mb-4 mb-md-0">
                    <div class="programa-icon mx-auto" style="width: 150px; height: 150px; font-size: 4rem;">
                        🎯
                    </div>
                </div>
                <div class="col-md-9">
                    <h1 class="display-4 fw-bold mb-3" style="color: white;">
                        {{ proyecto.titulo }}
                    </h1>
                    <p class="lead mb-4" style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem;">
                        {{ proyecto.descripcion_detallada|truncatechars:150 }}
                    </p>
                    <div class="d-flex flex-wrap justify-content-center gap-3">
                        <span class="badge" style="background: rgba(255, 255, 255, 0.2); color: white; font-size: 1rem; padding: 12px 20px;">
                            <i class="fas fa-building me-2"></i>{{ proyecto.area_proponente }}
                        </span>
                        <span class="badge" style="background: rgba(255, 255, 255, 0.2); color: white; font-size: 1rem; padding: 12px 20px;">
                            <i class="fas fa-user-tie me-2"></i>{{ proyecto.responsable }}
                        </span>
                        <span class="badge" style="background: rgba(255, 255, 255, 0.2); color: white; font-size: 1rem; padding: 12px 20px;">
                            <i class="fas fa-calendar me-2"></i>{{ proyecto.fecha_creacion|date:"d M Y" }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Información General -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="info-card h-100">
            <div class="d-flex align-items-center mb-4">
                <div class="modalidad-icon me-3" style="background: linear-gradient(135deg, #008000 0%, #ff6600 100%);">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div>
                    <h4 class="mb-1 fw-bold" style="color: #008000;">Información General</h4>
                    <small class="text-muted">Datos básicos del proyecto</small>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="row">
                    <div class="col-4">
                        <strong style="color: #ff6600;">ID Proyecto:</strong>
                    </div>
                    <div class="col-8">
                        <span class="badge" style="background: linear-gradient(135deg, #008000 0%, #ff6600 100%); color: white; font-size: 1rem;">
                            #{{ proyecto.id }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="row">
                    <div class="col-4">
                        <strong style="color: #ff6600;">Área Proponente:</strong>
                    </div>
                    <div class="col-8">
                        <span class="badge badge-sena px-3 py-2" style="font-size: 0.95rem;">
                            {{ proyecto.area_proponente }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="row">
                    <div class="col-4">
                        <strong style="color: #ff6600;">Responsable:</strong>
                    </div>
                    <div class="col-8">
                        <div class="d-flex align-items-center">
                            <div class="instructor-avatar me-2" style="width: 30px; height: 30px; font-size: 0.9rem;">
                                {{ proyecto.responsable|first }}
                            </div>
                            <span class="fw-semibold">{{ proyecto.responsable }}</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="timeline-item">
                <div class="row">
                    <div class="col-4">
                        <strong style="color: #ff6600;">Fecha de Creación:</strong>
                    </div>
                    <div class="col-8">
                        <div>
                            <span class="fw-bold">{{ proyecto.fecha_creacion|date:"d M Y" }}</span><br>
                            <small class="text-muted">{{ proyecto.fecha_creacion|date:"H:i:s" }}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="info-card h-100">
            <div class="d-flex align-items-center mb-4">
                <div class="modalidad-icon me-3" style="background: linear-gradient(135deg, #ff6600 0%, #e17055 100%);">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div>
                    <h4 class="mb-1 fw-bold" style="color: #ff6600;">Presupuesto</h4>
                    <small class="text-muted">Información financiera</small>
                </div>
            </div>
            
            <div class="text-center py-4">
                <div style="font-size: 4rem; margin-bottom: 20px; color: #008000;">💰</div>
                <h2 class="fw-bold mb-2" style="color: #008000; font-size: 2.5rem;">
                    ${{ proyecto.presupuesto_estimado|floatformat:0 }}
                </h2>
                <p class="text-muted mb-3" style="font-size: 1.2rem;">Pesos Colombianos (COP)</p>
                <div class="alert" style="background: rgba(0, 128, 0, 0.1); border-left: 4px solid #008000; border-radius: 10px;">
                    <div class="d-flex align-items-center">
                        <span style="color: #008000; margin-right: 10px; font-size: 1.2rem;">💡</span>
                        <small style="color: #008000; font-weight: 600;">
                            Presupuesto estimado para la ejecución completa del proyecto
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Descripción Detallada -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">📝</span>
                <div>
                    <h5 class="mb-1">Descripción Detallada</h5>
                    <small class="opacity-75">Información completa del proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p class="lead" style="line-height: 1.8; font-size: 1.1rem; color: #2d3436;">
                        {{ proyecto.descripcion_detallada }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Objetivos -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">🎯</span>
                <div>
                    <h5 class="mb-1">Objetivos Generales</h5>
                    <small class="opacity-75">Metas principales del proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.objetivos_generales }}
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">🎯</span>
                <div>
                    <h5 class="mb-1">Objetivos Específicos</h5>
                    <small class="opacity-75">Metas detalladas del proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.objetivos_especificos }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Alcance y Limitaciones -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">📋</span>
                <div>
                    <h5 class="mb-1">Alcance y Limitaciones</h5>
                    <small class="opacity-75">Definición del proyecto y sus restricciones</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.alcance_limitaciones }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recursos y Cronograma -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">🛠️</span>
                <div>
                    <h5 class="mb-1">Recursos Necesarios</h5>
                    <small class="opacity-75">Materiales y herramientas requeridas</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.recursos_necesarios }}
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">📅</span>
                <div>
                    <h5 class="mb-1">Cronograma Tentativo</h5>
                    <small class="opacity-75">Planificación temporal del proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.cronograma_tentativo }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Beneficiarios e Indicadores -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">👥</span>
                <div>
                    <h5 class="mb-1">Beneficiarios Esperados</h5>
                    <small class="opacity-75">Población objetivo del proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.beneficiarios_esperados }}
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header d-flex align-items-center">
                <span style="font-size: 1.5rem; margin-right: 15px;">📊</span>
                <div>
                    <h5 class="mb-1">Indicadores de Éxito</h5>
                    <small class="opacity-75">Métricas para evaluar el proyecto</small>
                </div>
            </div>
            <div class="card-body">
                <div class="info-item">
                    <p style="line-height: 1.7; color: #2d3436;">
                        {{ proyecto.indicadores_exito }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Información del Sistema -->
<div class="row mb-4">
    <div class="col-12">
        <div class="alert" style="background: rgba(0, 184, 148, 0.1); border-left: 4px solid #00b894; border-radius: 15px;">
            <div class="row align-items-center">
                <div class="col-md-2 text-center">
                    <div style="font-size: 3rem; color: #00b894;">ℹ️</div>
                </div>
                <div class="col-md-10">
                    <h5 class="fw-bold mb-2" style="color: #00b894;">Información del Sistema</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>ID del Proyecto:</strong> #{{ proyecto.id }}</p>
                            <p class="mb-1"><strong>Registrado el:</strong> {{ proyecto.fecha_creacion|date:"d/m/Y H:i:s" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Estado:</strong> <span class="badge" style="background: #008000; color: white;">Activo</span></p>
                            <p class="mb-1"><strong>Sistema:</strong> SENA APP</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Botones de Acción -->
<div class="row">
    <div class="col-12">
        <div class="d-flex flex-wrap justify-content-center gap-3 py-4">
            <a href="{% url 'proyectos:lista_proyectos' %}" class="btn btn-secondary btn-lg px-4">
                <i class="fas fa-arrow-left me-2"></i>Volver a la Lista
            </a>
            <a href="{% url 'admin:proyectos_proyecto_change' proyecto.pk %}" class="btn btn-primary btn-lg px-4">
                <i class="fas fa-edit me-2"></i>Editar Proyecto
            </a>
            <button class="btn btn-success btn-lg px-4" onclick="window.print()">
                <i class="fas fa-print me-2"></i>Imprimir Detalles
            </button>
            <button class="btn btn-info btn-lg px-4" onclick="compartirProyecto()">
                <i class="fas fa-share me-2"></i>Compartir
            </button>
        </div>
    </div>
</div>

<script>
// Funcionalidades adicionales
document.addEventListener('DOMContentLoaded', function() {
    // Efecto de aparición gradual para las tarjetas
    const cards = document.querySelectorAll('.card, .info-card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s ease';
        
        setTimeout(() => {
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });
    
    // Mejorar interactividad de las tarjetas
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 15px 35px rgba(0, 184, 148, 0.15)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '';
        });
    });
});

function compartirProyecto() {
    if (navigator.share) {
        navigator.share({
            title: '{{ proyecto.titulo }} - SENA APP',
            text: 'Proyecto: {{ proyecto.titulo }} - {{ proyecto.descripcion_detallada|truncatechars:100 }}',
            url: window.location.href
        });
    } else {
        // Fallback: copiar URL al portapapeles
        navigator.clipboard.writeText(window.location.href).then(function() {
            // Mostrar notificación
            const toast = document.createElement('div');
            toast.className = 'alert alert-success position-fixed';
            toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999; opacity: 0; transition: opacity 0.3s;';
            toast.innerHTML = '<i class="fas fa-check me-2"></i>URL copiada al portapapeles';
            document.body.appendChild(toast);
            
            setTimeout(() => toast.style.opacity = '1', 100);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        });
    }
}

// Funcionalidad de impresión mejorada
window.addEventListener('beforeprint', function() {
    // Ocultar elementos no necesarios para impresión
    document.querySelectorAll('.btn, .breadcrumb, nav').forEach(el => {
        el.style.display = 'none';
    });
});

window.addEventListener('afterprint', function() {
    // Restaurar elementos después de imprimir
    document.querySelectorAll('.btn, .breadcrumb, nav').forEach(el => {
        el.style.display = '';
    });
});
</script>
{% endblock %}